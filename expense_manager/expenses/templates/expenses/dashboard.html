{% extends "expenses/base.html" %}
{% block content %}
<h2>ğŸ“Š Thá»‘ng kÃª chi tiÃªu</h2>

<div class="row">
  <div class="col-md-6">
    <div class="card p-3">
      <h5>Biá»ƒu Ä‘á»“ trÃ²n</h5>
      <canvas id="pieChart"></canvas>
    </div>
  </div>
  <div class="col-md-6">
    <div class="card p-3">
      <h5>Biá»ƒu Ä‘á»“ cá»™t</h5>
      <canvas id="barChart"></canvas>
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
  // Truyá»n dá»¯ liá»‡u tá»« Django sang JS (chuyá»ƒn thÃ nh JSON há»£p lá»‡)
  const chartLabels = JSON.parse('{{ labels|safe|escapejs }}');
  const chartData = JSON.parse('{{ data|safe|escapejs }}');

  // Biá»ƒu Ä‘á»“ trÃ²n
  new Chart(document.getElementById("pieChart"), {
    type: "pie",
    data: {
      labels: chartLabels,
      datasets: [{
        data: chartData,
        backgroundColor: ["#f44336", "#2196f3", "#4caf50", "#ff9800", "#9c27b0"]
      }]
    }
  });

  // Biá»ƒu Ä‘á»“ cá»™t
  new Chart(document.getElementById("barChart"), {
    type: "bar",
    data: {
      labels: chartLabels,
      datasets: [{
        label: "Chi tiÃªu",
        data: chartData,
        backgroundColor: "#2196f3"
      }]
    },
    options: {
      scales: { y: { beginAtZero: true } }
    }
  });
</script>
{% endblock %}
