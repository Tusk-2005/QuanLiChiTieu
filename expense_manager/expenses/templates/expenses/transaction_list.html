{% extends "expenses/base.html" %}
{% block content %}
<style>
  .exp-list-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1.5rem;
  }

  .exp-list-title {
    font-size: 1.5rem;
    font-weight: 600;
  }

  .exp-transaction-card {
    border-radius: 18px;
    border: 1px solid #e5e7eb;
    box-shadow: 0 12px 32px rgba(0, 0, 0, 0.06);
    transition:
      transform 0.18s ease-out,
      box-shadow 0.18s ease-out,
      border-color 0.18s ease-out,
      background-color 0.18s ease-out;
  }

  .exp-transaction-card:hover {
    transform: translateY(-4px);
    box-shadow: 0 18px 52px rgba(0, 0, 0, 0.14);
    border-color: #000000;
    background-color: #fafafa;
  }

  .exp-amount {
    font-size: 1.1rem;
    font-weight: 700;
  }

  .btn-dark,
  .btn-outline-dark {
    border-radius: 999px;
    text-transform: uppercase;
    letter-spacing: 0.12em;
    font-size: 0.75rem;
    font-weight: 600;
    padding: 0.45rem 1.1rem;
    transition:
      background-color 0.18s ease-out,
      color 0.18s ease-out,
      border-color 0.18s ease-out,
      transform 0.18s ease-out,
      box-shadow 0.18s ease-out;
  }

  .btn-dark {
    background-color: #000000;
    border-color: #000000;
    color: #ffffff;
  }

  .btn-dark:hover {
    background-color: #222222;
    border-color: #222222;
    transform: translateY(-1px);
    box-shadow: 0 10px 26px rgba(0, 0, 0, 0.6);
  }

  .btn-outline-dark {
    background-color: transparent;
    border-color: #4b5563;
    color: #111827;
  }

  .btn-outline-dark:hover {
    background-color: #000000;
    border-color: #000000;
    color: #ffffff;
    transform: translateY(-1px);
    box-shadow: 0 10px 26px rgba(0, 0, 0, 0.6);
  }
</style>

<div class="exp-list-header">
  <h2 class="exp-list-title">üìí Danh s√°ch giao d·ªãch</h2>
  <a href="{% url 'transaction_create' %}" class="btn btn-dark">
    ‚ûï Th√™m giao d·ªãch
  </a>
</div>

<div class="row">
  {% for t in transactions %}
  <div class="col-md-4 mb-4">
    <div class="exp-transaction-card card p-3 {% if t.type == 'income' %}border-success{% else %}border-danger{% endif %}">
      <!-- Header -->
      <div class="d-flex justify-content-between align-items-center mb-2">
        <h5 class="mb-0 {% if t.type == 'income' %}text-success{% else %}text-danger{% endif %}">
          {{ t.get_type_display }}
        </h5>
        <span class="exp-amount">{{ t.amount }} ‚Ç´</span>
      </div>

      <!-- Body -->
      <p class="mb-1">
        <b>Danh m·ª•c:</b> {{ t.category|default:"Kh√¥ng c√≥" }}
      </p>
      <p class="mb-1">
        <b>Ng√†y:</b> {{ t.date }}
      </p>
      <p class="text-muted mb-2">
        {{ t.note }}
      </p>

      <!-- Footer (Edit + Delete) -->
      <div class="d-flex justify-content-end gap-2 mt-2">
        <a href="{% url 'transaction_edit' t.id %}" class="btn btn-sm btn-outline-dark">
          ‚úèÔ∏è S·ª≠a
        </a>
        <form method="post"
              action="{% url 'transaction_delete' t.id %}"
              onsubmit="return confirm('B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën xo√° giao d·ªãch n√†y?');">
          {% csrf_token %}
          <button type="submit" class="btn btn-sm btn-outline-danger">
            üóë Xo√°
          </button>
        </form>
      </div>

    </div>
  </div>
  {% empty %}
  <p class="text-muted">Ch∆∞a c√≥ giao d·ªãch n√†o.</p>
  {% endfor %}
</div>
{% endblock %}
