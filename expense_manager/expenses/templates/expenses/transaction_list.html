{% extends "expenses/base.html" %}
{% block content %}
<h2 class="mb-4">ğŸ“’ Danh sÃ¡ch giao dá»‹ch</h2>

<div class="row">
  {% for t in transactions %}
  <div class="col-md-4 mb-3">
    <div class="card p-3 {% if t.type == 'income' %}border-success{% else %}border-danger{% endif %}">
      
      <!-- Header -->
      <div class="d-flex justify-content-between align-items-center">
        <h5 class="{% if t.type == 'income' %}text-success{% else %}text-danger{% endif %}">
          {{ t.get_type_display }}
        </h5>
        <span class="fw-bold">{{ t.amount }} â‚«</span>
      </div>

      <!-- Body -->
      <p class="mb-1"><b>Danh má»¥c:</b> {{ t.category|default:"KhÃ´ng cÃ³" }}</p>
      <p class="mb-1"><b>NgÃ y:</b> {{ t.date }}</p>
      <p class="text-muted">{{ t.note }}</p>

      <!-- Footer (Edit + Delete) -->
      <div class="d-flex justify-content-end gap-2 mt-2">
        <a href="{% url 'transaction_edit' t.id %}" class="btn btn-sm btn-outline-primary">
          âœï¸ Sá»­a
        </a>
        <form method="post" action="{% url 'transaction_delete' t.id %}" 
              onsubmit="return confirm('Báº¡n cÃ³ cháº¯c cháº¯n muá»‘n xoÃ¡ giao dá»‹ch nÃ y?');">
          {% csrf_token %}
          <button type="submit" class="btn btn-sm btn-outline-danger">ğŸ—‘ XoÃ¡</button>
        </form>
      </div>

    </div>
  </div>
  {% empty %}
  <p class="text-muted">ChÆ°a cÃ³ giao dá»‹ch nÃ o.</p>
  {% endfor %}
</div>

<!-- Add new -->
<a href="{% url 'transaction_create' %}" class="btn btn-primary mt-3">â• ThÃªm giao dá»‹ch</a>
{% endblock %}
